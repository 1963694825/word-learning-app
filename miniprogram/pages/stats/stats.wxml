<!--pages/stats/stats.wxml-->
<view class="container">
  <view wx:if="{{loading}}" class="loading">
    <text>加载中...</text>
  </view>

  <view wx:else class="stats-content">
    <!-- 总体统计 -->
    <view class="stats-card">
      <text class="card-title">学习统计</text>
      <view class="stats-grid">
        <view class="stat-item">
          <text class="stat-value">{{stats.total_words}}</text>
          <text class="stat-label">累计学习</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{stats.mastered_words}}</text>
          <text class="stat-label">已掌握</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{stats.today_words}}</text>
          <text class="stat-label">今日学习</text>
        </view>
      </view>
    </view>

    <!-- 打卡统计 -->
    <view class="stats-card">
      <text class="card-title">打卡记录</text>
      <view class="stats-grid">
        <view class="stat-item">
          <text class="stat-value">{{stats.total_learn_days}}</text>
          <text class="stat-label">累计天数</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{stats.continuous_days}}</text>
          <text class="stat-label">连续天数</text>
        </view>
      </view>
    </view>

    <!-- 学习日历 -->
    <view class="stats-card">
      <view class="calendar-header">
        <text class="card-title">学习日历</text>
        <text class="current-month">{{currentMonth}}</text>
      </view>
      
      <!-- 星期标题 -->
      <view class="calendar-weekdays">
        <text class="weekday">一</text>
        <text class="weekday">二</text>
        <text class="weekday">三</text>
        <text class="weekday">四</text>
        <text class="weekday">五</text>
        <text class="weekday">六</text>
        <text class="weekday">日</text>
      </view>
      
      <!-- 日历格子 -->
      <view class="calendar-grid">
        <view 
          wx:for="{{calendar}}" 
          wx:key="index" 
          class="calendar-day {{item.isCurrentMonth ? 'current-month' : 'other-month'}}"
        >
          <text class="day-number" wx:if="{{item.day}}">{{item.day}}</text>
          <text class="day-count" wx:if="{{item.count > 0}}">{{item.count}}词</text>
        </view>
      </view>
    </view>
  </view>
</view>