<!--pages/learn/learn.wxml-->
<view class="container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- å®ŒæˆçŠ¶æ€ -->
  <view wx:elif="{{finished}}" class="finished">
    <text class="finished-icon">ğŸ‰</text>
    <text class="finished-text">ä»Šæ—¥å­¦ä¹ å®Œæˆ!</text>
  </view>

  <!-- å­¦ä¹ å†…å®¹ -->
  <view wx:else class="learn-content">
    <!-- è¿›åº¦æ¡ -->
    <view class="progress-bar">
      <view class="progress-text">{{progress.current}} / {{progress.total}}</view>
      <view class="progress-track">
        <view class="progress-fill" style="width: {{progress.current / progress.total * 100}}%"></view>
      </view>
    </view>

    <!-- å•è¯å¡ç‰‡ -->
    <view class="word-card {{showAnswer ? 'flipped' : ''}}" bindtap="flipCard">
      <view class="card-front">
        <text class="word">{{currentWord.word}}</text>
        <text class="phonetic">{{currentWord.phonetic_us}}</text>
        <text class="hint">ç‚¹å‡»æŸ¥çœ‹é‡Šä¹‰</text>
      </view>
      
      <view class="card-back">
        <text class="word">{{currentWord.word}}</text>
        <text class="phonetic">{{currentWord.phonetic_us}}</text>
        <view class="definitions">
          <block wx:for="{{currentWord.definitions}}" wx:key="index">
            <view class="definition-item">
              <text class="pos">{{item.pos}}</text>
              <text class="meaning">{{item.meaning}}</text>
            </view>
          </block>
        </view>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="actions">
      <button class="btn-unknow" bindtap="handleUnknow">
        ä¸è®¤è¯†
      </button>
      <button class="btn-know" bindtap="handleKnow">
        è®¤è¯†
      </button>
    </view>
  </view>
</view>
