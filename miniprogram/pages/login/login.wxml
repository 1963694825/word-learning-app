<!--pages/login/login.wxml-->
<view class="login-container">
  <!-- 背景装饰 -->
  <view class="bg-decoration">
    <view class="circle circle-1"></view>
    <view class="circle circle-2"></view>
    <view class="circle circle-3"></view>
  </view>

  <!-- 登录内容 -->
  <view class="login-content">
    <!-- Logo和标题 -->
    <view class="header">
      <view class="logo">📚</view>
      <text class="title">单词学习助手</text>
      <text class="subtitle">让英语学习更简单</text>
    </view>

    <!-- 用户信息填写 -->
    <view class="user-info-section" wx:if="{{showUserInfo}}">
      <view class="info-title">完善个人信息</view>
      
      <!-- 头像选择 -->
      <view class="avatar-section">
        <button class="avatar-button" open-type="chooseAvatar" bindchooseavatar="onChooseAvatar">
          <image class="avatar-preview" src="{{avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
          <text class="avatar-tip">点击选择头像</text>
        </button>
      </view>

      <!-- 昵称输入 -->
      <view class="nickname-section">
        <input 
          class="nickname-input" 
          type="nickname" 
          placeholder="请输入昵称"
          value="{{nickname}}"
          bindchange="onNicknameChange"
        />
      </view>

      <!-- 确认按钮 -->
      <button 
        class="confirm-btn" 
        bindtap="handleConfirmInfo"
        disabled="{{!avatarUrl || !nickname}}"
      >
        确认并登录
      </button>
    </view>

    <!-- 登录按钮 -->
    <view class="login-section" wx:else>
      <view class="features">
        <view class="feature-item">
          <text class="feature-icon">✨</text>
          <text class="feature-text">智能记忆曲线</text>
        </view>
        <view class="feature-item">
          <text class="feature-icon">📖</text>
          <text class="feature-text">海量词库资源</text>
        </view>
        <view class="feature-item">
          <text class="feature-icon">📊</text>
          <text class="feature-text">学习数据统计</text>
        </view>
      </view>

      <button 
        class="login-btn" 
        bindtap="handleWxLogin"
        loading="{{loading}}"
        disabled="{{loading}}"
      >
        <text wx:if="{{!loading}}">微信一键登录</text>
        <text wx:else>登录中...</text>
      </button>
      
      <view class="tips">
        <text class="tips-text">登录即表示同意</text>
        <text class="tips-link">《用户协议》</text>
        <text class="tips-text">和</text>
        <text class="tips-link">《隐私政策》</text>
      </view>
    </view>
  </view>
</view>
